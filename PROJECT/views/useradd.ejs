<!DOCTYPE html>
<html lang="en">
<head>
	<title>ADD USER</title>
		  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">	
	<link rel="stylesheet" href="useraddcss.css" type="text/css">
	<link rel="stylesheet" href="headercss.css" type="text/css">
	<link rel="stylesheet" href="sidebarcss.css" type="text/css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
				
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
	
</head>
<body class="body">	
	<% include partials/header %>
	<div id="viewscreen">
<% include partials/sidebar %>
	<div id="rightview">
<div class="container">
 
    <div class="col-sm-3">
    </div>
    <div class="col-sm-6" style="background-color:#fff;border:5px solid rgba(0,0,0,0.1);margin-top:12px">
      <br />


      <h1>Add User</h1>
          
            <div class="col-sm-12">
              <div class="form-group">
                  <input type="text" required="" name="fullname" class="form-control" id="name" placeholder="Name" autocomplete="off"><br/>
              </div>

                <div class="form-group">
                    <input type="email" required="" name="username" class="form-control" id="mail"
                           placeholder="Email" autocomplete="off" autocorrect="off" ><br/>
                </div>
                <div class="form-group">
                    <input type="password" required="" id="pswd" class="form-control"
                           placeholder="User Password" autocorrect="off"><br/>
                </div>

              <div class="form-group">
                  <input type="text" required="" id="phone" class="form-control" maxlength="10" id="phone" placeholder="Phone" autocomplete="off"><br/>
              </div>
              <div class="form-group">
                  <input type="text" required="" id="city" class="form-control" placeholder="City" autocomplete="false"><br/>
              </div>

              <div class="form-group">
                <label>Role:</label><br/>
                <select name="roleoptions" class="form-control" id="role">
                    
                      <option>User</option>
                        <option>Community Builder</option>
                      <option>Admin</option>
                   
                </select>
              </div>
			  
              <div class="form-group">
                 <button type="button" id="add" class="btn btn-success">Add User</button>
				 <button type="button" id="cancel" class="btn btn-danger">Cancel</button>
              </div>
            </div>  
          
      </div>
</div>
</div>
</div>	
</body>
<script>
var add_btn=document.getElementById("add");
var cancel_btn=document.getElementById("cancel");
/*
var n = document.getElementById("name");
var e = document.getElementById("mail");
var pa = document.getElementById("pswd");
var ph = document.getElementById("phone");
var c = document.getElementById("city");
var r = document.getElementById("role");
*/
cancel.addEventListener('click',function()
{
	window.location="/home";
});
add_btn.addEventListener('click',function()
{
  var n = document.getElementById("name").value;
var e = document.getElementById("mail").value;
var pa = document.getElementById("pswd").value;
var ph = document.getElementById("phone").value;
var c = document.getElementById("city").value;
var r = document.getElementById("role").value;
  if(n == "")
  alert("Fill name field");
  else if(e == "")
  alert("Fill email field");
  else if(pa == "")
  alert("Fill password");
  else if(ph == "")
  alert("Fill phone field");
  else if(c == "")
  alert("Fill city");
  else if(r == "")
  alert("Fill role field");
  else
  {
	var ob = new Object();
	ob.name= n;
	ob.email= e;
	ob.password= pa; 
	ob.phone= ph;
  ob.city= c;
	ob.role= r;
	
	var request = new XMLHttpRequest();
	request.open('POST','/add');
		request.setRequestHeader("Content-Type","application/JSON");
        request.send(JSON.stringify(ob));
	request.onload=function()
	{
			console.log("created in database");
			alert("User added");
			//window.location="/home";
  }
}
});
</script>
<script src="headerjs.js" type="text/javascript"></script>
<script src="sidebarjs.js" type="text/javascript"></script>
</html>